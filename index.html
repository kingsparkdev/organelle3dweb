<!doctype html>
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- cache 사용하지 않음 -->
    <meta http-equiv="Cache-Control" content="no-cache">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- google font fammily -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300&display=swap" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- model-viewer script -->
    <script type="module" src="https://unpkg.com/@google/model-viewer@1.8.0/dist/model-viewer.min.js"></script>
    <script type="module" src="js/cameraControlsModel.js"></script>
    
    <title>세포소기관</title>
</head>

<body>
    <model-viewer id="model-viewer" bounds="tight" enable-pan src="3d/model.glb" camera-controls
        ar ar-modes="webxr scene-viewer quick-look"
        shadow-intensity="0.93" shadow-softness="0.5" exposure="1.43"
        environment-image="neutral" poster="poster.webp" shadow-intensity="1" auto-rotate
        camera-orbit="35.19deg 51.2deg auto">
        <button class="Hotspot custom-btn btn-5" slot="hotspot-1"
            data-position="0.003921806399141704m 0.05369579796371556m 0.021941546363745432m"
            data-normal="0.06020004289134885m 0.7089052354147348m 0.7027299068898799m"
            data-orbit="-30.94862deg 44.56856deg 0.86545582m"
            data-target="0.003921806399141704m 0.05369579796371556m 0.021941546363745432m" 
            data-fov="20.00deg"
            data-visibility-attribute="visible">
            <div class="HotspotAnnotation" onclick="annotationClicked(this)">미토콘드리아</div>
        </button><button class="Hotspot custom-btn btn-5" slot="hotspot-3"
            data-position="0.024335938538530846m 0.05799155139408506m 0.014400766309876693m"
            data-normal="-0.031050232494914322m 0.998993332599271m -0.032375986227664064m"
            data-orbit="35.22deg 54.37deg auto"
            data-target="0.024335938538530846m 0.05799155139408506m 0.014400766309876693m"
            data-fov="20.00deg"
            data-visibility-attribute="visible">
            <div class="HotspotAnnotation" onclick="annotationClicked(this)">Gorge Body</div>
        </button><button class="Hotspot custom-btn btn-5" slot="hotspot-5"
            data-position="-0.04289103596259789m 0.062361264419335836m 0.013179216546743276m"
            data-normal="-0.6353111584436935m 0.08657687390360598m -0.7673878920480904m"
            data-orbit="426.9deg 63.24deg auto"
            data-target="-0.04289103596259789m 0.062361264419335836m 0.013179216546743276m"
            data-fov="20.00deg"
            data-visibility-attribute="visible">
            <div class="HotspotAnnotation" onclick="annotationClicked(this)">매끈면 소포체</div>
        </button><button class="Hotspot custom-btn btn-5" slot="hotspot-7"
            data-position="-0.009463817652688167m 0.04524378187953379m 0.02846453538800581m"
            data-normal="0.8293278199998948m 0.4071170203680585m 0.38271542783229434m"
            data-orbit="-25.69deg 46.7deg auto"
            data-target="-0.009463817652688167m 0.04524378187953379m 0.02846453538800581m"
            data-fov="20.00deg"
            data-visibility-attribute="visible">
            <div class="HotspotAnnotation" onclick="annotationClicked(this)">중심체</div>
        </button><button class="Hotspot custom-btn btn-5" slot="hotspot-9"
            data-position="-0.0038637913005426573m 0.06604332459228629m -0.010901798203560006m"
            data-normal="-0.30775497347478487m 0.8855532565651817m 0.34796882919068484m"
            data-orbit="-14.8deg 71.3deg auto"
            data-target="-0.0038637913005426573m 0.06604332459228629m -0.010901798203560006m"
            data-fov="20.00deg"
            data-visibility-attribute="visible">
            <div class="HotspotAnnotation" onclick="annotationClicked(this)">핵</div>
        </button><button class="Hotspot custom-btn btn-5" slot="hotspot-10"
            data-position="-0.008468492059502999m 0.05787353567347014m 0.007865378552824135m"
            data-normal="-0.36610564964842995m 0.4742822974399143m 0.8006390919950248m" 
            data-orbit="338.6deg 36.21deg auto"
            data-target="-0.008468492059502999m 0.05787353567347014m 0.007865378552824135m"
            data-fov="20.00deg"
            data-visibility-attribute="visible">
            <div class="HotspotAnnotation" onclick="annotationClicked(this)">거친면 소포체</div>
        </button>
        <button class="Hotspot custom-btn btn-5" slot="hotspot-11" 
            data-position="0.006523407240012618m 0.05860340471123044m 0.007882155789497705m" 
            data-normal="0.22696718804743807m 0.8373515333602937m 0.49732112877797996m" 
            data-orbit="391deg 22.9deg auto"
            data-target="0.006523407240012618m 0.05860340471123044m 0.007882155789497705m"
            data-fov="12.91deg"
            data-visibility-attribute="visible">
            <div class="HotspotAnnotation" onclick="annotationClicked(this)">리보솜</div>
        </button>
    </model-viewer>


    <script>
        const mv = document.querySelector("#model-viewer");
        let flag = 0;
        const annotationClicked = (a) => {
            let ds = a.parentNode.dataset;
            mv.cameraTarget = ds.target;
            mv.cameraOrbit = ds.orbit;
            if (ds.fov !== undefined) mv.fieldOfView = ds.fov;
            if (flag === 1) {
                flag = 0;
                mv.cameraTarget = "auto auto auto";
                mv.cameraOrbit = "33.67deg 50.85deg auto";
            } else flag = 1;
        };
    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</body>

</html>

<!-- 
정해야하는 값: data-orbit, data-target, data-fov
    data-orbit="-20.94862deg 64.56856deg 0.86545582m" data-target="0.03323465608204483m 1.7456965277218954m 0.9633126732252862m" data-fov="22.91deg"
-->